<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Simple Sverchok 01 - Centers Polygons - Look Think Make</title>	
	<meta name="author" content="elfnor">
	

	<meta name="description" content="Sverchok is an add-on for Blender. It allows you to generate geometry in Blender in a parametric way by wiring visual nodes together rather than programming in Blender python. This is the first of hopefully a series on very simple examples of using Sverchok. I'm learning this as I ...">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link href='http://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://www.elfnor.com/theme/css/main.css" type="text/css" />
		

    <link href="http://www.elfnor.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Look Think Make Atom Feed" />
</head>
	
<body>

    <div class="container">
	  
	  <header role="banner">
	    <div class="feeds">
	        <a href="http://www.elfnor.com/feeds/all.atom.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="atom feed"/></a>
	    </div>
	      <nav class="pages">
			  <a href="http://www.elfnor.com/pages/about-me.html">About Me</a>
-			  <a href="http://www.elfnor.com/pages/galleries.html">Galleries</a>
	      </nav>
		<a href="http://www.elfnor.com" class="title">Look Think Make</a>
      </header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
			
		<h1>Simple Sverchok 01 - Centers Polygons</h1>
		
<div class="metadata">
  <time datetime="2014-12-20T22:00:00" pubdate>Sat 20 December 2014</time>
    <address class="vcard author">
      by <a class="url fn" href="http://www.elfnor.com/author/elfnor.html">elfnor</a>
    </address>
  in <a href="http://www.elfnor.com/category/think.html">think</a>
<p class="tags">tagged <a href="http://www.elfnor.com/tag/make.html">make</a>, <a href="http://www.elfnor.com/tag/think.html">think</a>, <a href="http://www.elfnor.com/tag/blender.html">blender</a>, <a href="http://www.elfnor.com/tag/sverchok.html">sverchok</a></p></div>		
		<p><img alt="final render sverchok centres polygon demo" src="/images/centers_polygon_demo_image.png" /></p>
<p><a href="http://nikitron.cc.ua/sverchok_en.html">Sverchok</a> is an add-on for Blender. It allows you to generate geometry in Blender in a parametric way by wiring visual nodes together rather than programming in Blender python.</p>
<p>This is the first of hopefully a series on very simple examples of using Sverchok. I'm learning this as I blog about it (the best way of learning something is to try and teach someone else) so if I make mistakes or find a better way of doing something later I'll try and come back and update these posts.</p>
<h2>Installation and setup</h2>
<p>Get the latest version of Sverchok from github.</p>
<ul>
<li>Download Sverchok from github <a href="https://github.com/nortikin/sverchok/archive/master.zip">https://github.com/nortikin/sverchok/archive/master.zip</a></li>
<li>User Preferences &gt; Addons &gt; install from file &gt;</li>
<li>Choose zip-archive &gt; activate flag beside Sverchok</li>
<li>Enable permanently in the startup.blend using Ctrl + U and Save User Settings from the  Addons menu. </li>
</ul>
<p>My preferred layout for working in Sverchok is to start with the Compositing screen layout and change the bottom left window to a Text Editor. At the bottom of the Node Editor select the node tree type to Sverchok and add a new node tree.</p>
<h2>Centers Polygons</h2>
<p>Here is the first node set up we're going to look at.</p>
<p><a href="http://www.elfnor.com/images/centers_polygons1.blend.png"><img alt="centers polygons node example" src="images/centers_polygons1.blend_low_res.png" /></a></p>
<p>This is a very simple node diagram (click for a larger image). All it does is copy one object from the scene onto the centers' of the polygons of another object in the scene.</p>
<p>I'll explain it in some detail to help us get a feel for how Sverchok handles the data for a mesh.</p>
<p>The two green "Objects_in" Scene nodes allow access to the data from objects in the scene. Select the scene object and press the "Get Selection" button to read in the data.</p>
<p>Each of the connections on the right side of the "Object_in" node outputs some of the mesh data for its object. To see what this data looks like connect a "Viewer_text" Text node to one of the outputs. Change one of  the panels in the blender window to a  text editor and select  the "Sverchok_viewer" from the data block selector. When the "VIEW" button on the "Viewer_text" node is pressed the data stream connected to the node will be written to this panel.</p>
<p><img alt="Viewer text node" src="/images/centers_polygons1a.blend.png" /></p>
<p>A blender mesh is described as the (x, y, z) coordinates of the vertices of the object. These are given relative to the origin of the object.</p>
<p>The edges and polygons describe how the vertices are connected to form the mesh. The edges are list of pairs that are connected by an edge. For instances (1, 5) means there is an edge between the <code>obj.data.vertices[1]</code> and <code>obj.data.vertices[5]</code>*. The polygons are similarly a list of the vertices connected by each polygon in the mesh.</p>
<p>In Sverchok it only makes sense to wire the same colored nodes together. Orange vertices coordinates  to orange vertices coordinates, Green lists of vertices (edges or polygons) to other lists etc.</p>
<p>The matrix of an object describes the position, scale and rotation of the object. The position is given as the position of the object's origin with respect to the Scene origin. "Get Selection" the data from a simple cube and look at its matrix with a "Viewer_text" node. Move, rotate and scale the cube and compare the values in the "Transform" panel to the matrix that Sverchok displays. (You'll need to use the "Get Selection" and "VIEW" buttons to update the data after each change to the object).</p>
<p>A little playing will show that the location and scale are stored in the matrix</p>
<div class="highlight"><pre><span class="k">[sx, 0,  0, x]</span>
<span class="k">[0, sy,  0, y]</span>
<span class="k">[0,  0, sz, z]</span>
<span class="k">[0,  0,  0, 1]</span>
</pre></div>


<p>where x, y, z are the location and sx, sy, sz, are the scale values.</p>
<p>Rotations affect the 3 x 3 top left corner of the matrix. If you're interested in more detail on how transform matrices really work see these <a href="http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/geometry/geo-tran.html">notes</a>.</p>
<p>To separate out the various parts of the transform matrix use the "Matrix out" node from the "Matrix" node set.  This takes a matrix (or many matrices) and outputs separately the location, scale, rotation and angle represented by that transform matrix. </p>
<p><img alt="Matrix out node" src="/images/centers_polygons1b.blend.png" /></p>
<p>The rotation output of the node is a list of three numbers which correspond to the X, Y, Z values of the rotation given in the transform panel of the 3D view when the "Axis Angle" display option is selected. The Angle  output of the node is the W value (in degrees) from the transform panel. In the "Axis Angle" mode,  X, Y, Z describe an axis and W describes a angle that the object is rotated about this axis. </p>
<p>If you apply the transform (CTRL-A) (location, scale and rotation to the object the transfrom matrix will be reset to the identity matrix (diagonal 1s, 0s everywhere else), the origin of the object will be moved to the scene origin and the vertices of the object will be recalculated to reflect this change in origin. The edges and polygons do not need to be updated through any of these transforms as they are only lists of the connections between vertices and as such contain no positional information.</p>
<p>Also play with moving, rotating or scaling the mesh in "EDIT" mode. You will find that this effects the vertex coordinates but not the transform matrix.</p>
<p>Getting back to the "Centers Polygons" node from the "Analysers" node set. It takes a set of vertex coordinates and a list of polygon connections as its inputs and outputs data about the centers of each of those polygons.</p>
<p><img alt="centers polygon nodes only" src="/images/centers_polygons1.blend_diagram.png" /></p>
<p>The "Centers" output of the node is colored blue, meaning its going to output matrices. 
In the node diagram the "Centers" output from the "Centers Polygons" node is connected to the matrix input of a "Viewer Draw" node. Connecting another mesh to the "Vertices" "Edge pol" inputs produces a copy of the second mesh at the center of each polygon on the first mesh.</p>
<p>Moving the second mesh with respect to its own origin will move (when everything is updated) the copies with respect to the polygon on the second mesh. The orientation of the copy is such that the copied objects z-direction is normal to the face. To see how the x and y directions map to the face select a face of the first object and change the transformation display to "Normal" mode. A little experimentation will show that the x axis of the second object is mapped to the y axis of the face normal.</p>
<p>The origins output of the "Centers Polygons" node output just a list of the centers of each polygon. The "Normals" and "Norm_abs" outputs are as described in the <a href="http://sverchok.readthedocs.org/en/latest/main.html">docs</a>:</p>
<blockquote>
<p>Normals is normals from global zero coordinates, vector. Norm_abs is normals shifted to centers of polygons. </p>
</blockquote>
<p>To turn the output of the "Viewer Draw" node into ordinary Blender meshes click the "Bake" button on the node. If its not showing check the properties in the right hand panel.</p>
<p>Alternatively if a "Viewer Bmesh" node is used instead of the "Viewer Draw" node, SV will update Blender meshes as changes are made. (Still need to click the "Update" button on the right hand panel.</p>
<hr />
<p><code>*</code> I've used the python code here that you could use to access the same data in the python console.</p>
<div class="highlight"><pre>    <span class="n">obj</span> <span class="o">=</span> <span class="n">bpy</span><span class="p">.</span><span class="n">context</span><span class="p">,</span><span class="n">active_object</span>
    <span class="n">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">co</span><span class="p">)</span>
</pre></div>


<hr />	

	</article>

	<div class="comments">
	<h2>Comments !</h2>
	    <div id="disqus_thread"></div>
	    <script type="text/javascript">
	       var disqus_identifier = "simple-sverchok-01-centers-polygons.html";
	       (function() {
	       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	       dsq.src = 'http://lookthinkmake.disqus.com/embed.js';
	       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	      })();
	    </script>
	</div>

		  </div>	
		  
		  <div class="sidebar">

	        <nav>
		  <h2>Recent Posts</h2>
			<ul class="archive">
	
			      <li>
<a href="http://www.elfnor.com/structure-synth-meets-sverchok-mesh-mode.html" rel="bookmark" title="Permalink to Structure Synth meets Sverchok - Mesh mode">Structure Synth meets Sverchok - Mesh mode</a>
  <time datetime="2015-03-15T22:00:00" pubdate>Sun 15 March 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/structure-synth-meets-sverchok-generative-art-inside-blender.html" rel="bookmark" title="Permalink to Structure Synth meets Sverchok - Generative Art inside Blender">Structure Synth meets Sverchok - Generative Art inside Blender</a>
  <time datetime="2015-03-08T22:00:00" pubdate>Sun 08 March 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a><a href="http://www.elfnor.com/tag/structuresynth.html">structuresynth  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/shaders-for-sverchok-03-image-texture-node.html" rel="bookmark" title="Permalink to Shaders for Sverchok 03 - Image Texture Node">Shaders for Sverchok 03 - Image Texture Node</a>
  <time datetime="2015-03-07T22:00:00" pubdate>Sat 07 March 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/shaders-for-sverchok-02-vertex-colors.html" rel="bookmark" title="Permalink to Shaders for Sverchok 02 - Vertex Colors">Shaders for Sverchok 02 - Vertex Colors</a>
  <time datetime="2015-02-26T22:00:00" pubdate>Thu 26 February 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/shaders-for-sverchok-01-object-info-node.html" rel="bookmark" title="Permalink to Shaders for Sverchok 01 - Object Info node.">Shaders for Sverchok 01 - Object Info node.</a>
  <time datetime="2015-02-22T22:00:00" pubdate>Sun 22 February 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/simple-sverchok-05-interpolate-and-iterate-matrix.html" rel="bookmark" title="Permalink to Simple Sverchok 05 - Interpolate and Iterate Matrix">Simple Sverchok 05 - Interpolate and Iterate Matrix</a>
  <time datetime="2015-01-31T22:00:00" pubdate>Sat 31 January 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/Arduino Bread Details.html" rel="bookmark" title="Permalink to Arduino Bread Details">Arduino Bread Details</a>
  <time datetime="2015-01-19T22:00:00" pubdate>Mon 19 January 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a></p></a>      			      </li>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	
                        </u1>
		
		</nav>

	          <h2>Categories</h2>
	          <ul class = "social">
		      <li> <a href="http://www.elfnor.com/archives.html">everything </a></li>	
	              <li ><a href="http://www.elfnor.com/category/look.html">look</a></li>
	              <li ><a href="http://www.elfnor.com/category/make.html">make</a></li>
	              <li class="active"><a href="http://www.elfnor.com/category/think.html">think</a></li>
	          </ul>
	        

	          <aside>
	          <h2>Elsewhere</h2>
			    <ul class="social">
				  <li><a href="http://elfnor.deviantart.com">on deviant art</a><i></i></li>
				  <li><a href="http://www.thingiverse.com/elfnor">on thingiverse</a><i></i></li>
				  <li><a href="https://github.com/elfnor">on github</a><i></i></li>
			    </ul>
			  </aside>

		
		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  © 2013 elfnor - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey"> pelican-simplegrey</a>, modified.
    	</p>

	  </footer>	

	</div>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=9900594; 
var sc_invisible=1; 
var sc_security="efb2c43c"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counter" href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="http://c.statcounter.com/9900594/0/efb2c43c/1/"
alt="free hit counter"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>