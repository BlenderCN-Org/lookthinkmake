<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Hyperbolic Tiling in 3D - Look Think Make</title>	
	<meta name="author" content="elfnor">
	

	<meta name="description" content="In a previous post I explained the shape of planes, spheres, and hyperbolic planes in terms of hexagons arranged around either another hexagon (plane), a pentagon (sphere) or a heptagon (hyperbolic plane). I used a photo of a hyperbolic plane someone else had made out of paper, as the 3D ...">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link href='http://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://www.elfnor.com/theme/css/main.css" type="text/css" />
		

    <link href="http://www.elfnor.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Look Think Make Atom Feed" />
</head>
	
<body>

    <div class="container">
	  
	  <header role="banner">
	    <div class="feeds">
	        <a href="http://www.elfnor.com/feeds/all.atom.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="atom feed"/></a>
	    </div>
	      <nav class="pages">
			  <a href="http://www.elfnor.com/pages/about-me.html">About Me</a>
-			  <a href="http://www.elfnor.com/pages/galleries.html">Galleries</a>
	      </nav>
		<a href="http://www.elfnor.com" class="title">Look Think Make</a>
      </header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
			
		<h1>Hyperbolic Tiling in 3D</h1>
		
<div class="metadata">
  <time datetime="2015-11-06T22:00:00+13:00" pubdate>Fri 06 November 2015</time>
    <address class="vcard author">
      by <a class="url fn" href="http://www.elfnor.com/author/elfnor.html">elfnor</a>
    </address>
  in <a href="http://www.elfnor.com/category/think.html">think</a>
<p class="tags">tagged <a href="http://www.elfnor.com/tag/make.html">make</a>, <a href="http://www.elfnor.com/tag/think.html">think</a>, <a href="http://www.elfnor.com/tag/blender.html">blender</a>, <a href="http://www.elfnor.com/tag/sverchok.html">sverchok</a></p></div>		
		<p><img alt="plane, sphere and hyperbolic footbal" src="/images/hexagon_sphere_plane_hyp_032.png" /></p>
<p>In a previous <a href="http://www.elfnor.com/blender-adventures-with-hyperbolic-planes.html">post</a> I explained the shape of planes, spheres, and hyperbolic planes in terms of hexagons arranged around either another hexagon (plane), a pentagon (sphere) or a heptagon (hyperbolic plane). I used a photo of a hyperbolic plane someone else had made out of paper, as the 3D model produced by my scripted Sverchok node was not meshed in a nice regular tiling. I thought I'd fix this.</p>
<p>The first step was to write a Sverchok node to make a Blender mesh of the regular tilings of the <a href="https://en.wikipedia.org/wiki/Poincar%C3%A9_disk_model">Poincaré disk</a>. The Poincaré disk is a model of 2D hyperbolic geometry where the points on an infinite hyperbolic plane are mapped inside a planar disk of unit radius. </p>
<p>In a plane or a sphere there are only a small number of regular polygons that can be used to tile the surface. For a plane its limited to triangles, squares and hexagons. These tilings can be described with two numbers, p the number of sides to the polygons used and q the number of polygons that meet at each vertex.  </p>
<p><a href="https://en.wikipedia.org/wiki/Uniform_tilings_in_hyperbolic_plane"><img alt="regular tilings from wikipedia" src="/images/regular_tilings_wikipedia.png" /></a></p>
<p>For a sphere the regular tilings are limited to the same combinations as the five platonic solids (tetrahedron {3, 3}, cube {4, 3} octahedron {3, 4}, dodecahedron {5, 3} and the icosahedron {3, 5})</p>
<p>Tilings with any other integer values of p and q (greater than 3) can be made only on a hyperbolic plane. </p>
<p>In the Poincaré disc model a straight line is a circular arc meeting the edge of the unit disk at right angles. The construction method for a tiling consists of placing a regular polygon at the center of the disc and then reflecting the polygon in each side of the polygon. These polygons are then reflected in their free sides and the process repeated until the disc is tiled to the desired resolution. Reflection in a line in the Poincaré disc is equivalent to something called "circle inversion". This is well explained <a href="http://moniker.name/worldmaking/?p=385">here</a> and hopefully shown in the next diagram.</p>
<p><img alt="circle inversion" src="/images/circle_inversion.png" /></p>
<p>Here <span class="math">\(O\)</span> is the center of the circular arc through <span class="math">\(\overline{AB}\)</span> which meets the unit circle at right angles. In the Poincaré disc model this is a straight line through <span class="math">\(\overline{AB}\)</span>. The polygon <span class="math">\(ABC'D'E'F'G'\)</span> is the circle inversion of polygon <span class="math">\(ABCDEFG\)</span> in the circle centered at <span class="math">\(O\)</span>. In the Poincaré disc model this is equivalent to a reflection in the line <span class="math">\(\overline{AB}\)</span>. Point <span class="math">\(C'\)</span> the inversion of point <span class="math">\(C\)</span> lies on the line <span class="math">\(\overline{OC}\)</span>.</p>
<p>The radius <span class="math">\(r\)</span> of the circle centered at <span class="math">\(O\)</span> is the length of the line <span class="math">\(\overline{OA}\)</span> </p>
<div class="math">$$
r = \left |  \overline{OA} \right | 
$$</div>
<p>The position of <span class="math">\(C'\)</span> on the line <span class="math">\(\overline{OC}\)</span> can then be found from:</p>
<div class="math">$$
r^2 = \left |  \overline{OC} \right | * \left |  \overline{OC'} \right | 
$$</div>
<p>This Sverchok scripted node <a href="https://github.com/elfnor/hyperbolic_coral">hyperbolic_tiling.py</a> implements the regular tilings of the Poincaré disk. (See <a href="http://www.elfnor.com/blender-adventures-with-hyperbolic-planes.html">earlier post</a> on how to use a Sverchok scripted node in Blender). The hardest part of coding this is keeping track of the vertices and edges that are already in place to avoid making duplicates.</p>
<p><img alt="poincare tiling in sverchok" src="/images/poincare_7-3.png" /></p>
<p>I now want to turn this flat mesh into a 3D mesh where each polygon has equal length sides. This can be done with a mass spring network where each edge of the mesh is modeled as a spring with a fixed rest length. The closest I can get to this in Blender is to use the "Soft Body" physics with the "Soft Body Self Collision" enabled.</p>
<p>In "Soft Body Self Collision" each vertex is surrounded by an elastic virtual ball. The physics engine stops vertices going inside the balls of other vertices during the simulation. This can be used to unfurl the Poincaré disk tiling into a 3D surface.</p>
<p>The final shape of the surface depends quite strongly on initial conditions. If we run the physics animation on a flat surface little happens. The second set of outputs on the Hyperbolic Tiling node output a version of the tiling that is bowl shaped rather than a plane. Also each face has been "poked" to only give triangular faces. </p>
<p><img alt="poincare tiling in sverchok" src="/images/poincare_7-3_poked_cupped.png" /></p>
<p><img alt="soft body parameters" class="floatright" src="/images/soft_body_parameters.png" />
<img alt="tiling unfurled" src="/images/tiling_unfurled.png" /></p>
<p>Bake the result of this second set of outputs to give a mesh. Add a "Soft Body" modifier to the mesh. The parameters I've found that produce the best results are shown in the screen capture on the right.</p>
<p>The parameters that differ from their default values are highlighted in red. Make sure "Soft Body Goal" is OFF and "Soft Body Self Collision" is ON. Experiment with some of the others to improve the speed or evenness of the final edge lengths. I've found that my edge lengths never come out all equal. If anyone can come up with settings for "Soft Body" that give a result with a  better ratio of minimum edge length/maximum edge length I'd love to see them in comments.</p>
<p>On my computer (i7, 2.8 Ghz, 4 GB RAM) the soft body solver is unstable when working on more than 250 to 300 faces. It either works very slowly and/or the mesh floats off the screen away from the origin.</p>
<p>A rotationally symmetric input mesh produces a symmetric output mesh (mostly). If you distort the input mesh a little the output mesh may be much less symmetric. For example, the p = 7, q = 3 tiling seems to have two final shapes depending on initial conditions. If you start with the symmetric output of the node it settles down to  a surface that has has 7 wrinkles around the outside edge. If you  add any distortion ("Randomize" in edit mode) before applying the soft body modifier the final shape is often much less symmetrical with ~3 major wrinkles around the outside.</p>
<p>To produce the hyperbolic football tiling:</p>
<ul>
<li>Use the Sverchok node to create a p = 7, q = 3, layers = 3 tiling mesh</li>
<li>Add a soft body modifier with the settings described above</li>
<li>Run the animation until the surface has unfurled.</li>
<li>Apply the soft body modifier</li>
<li>Add a "Subdivision Surface" modifier with 1 subdivision and apply it.</li>
<li>Apply a white material to the whole mesh</li>
<li>Select the central vertex and "Select Similar" vertices with a similar "Amount of connecting edges".</li>
<li>Expand the selection (Ctrl+) to select all the heptagons.</li>
<li>Apply a black material to the heptagons</li>
</ul>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }
    
    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript'; 
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>	

	</article>

	<div class="comments">
	<h2>Comments !</h2>
	    <div id="disqus_thread"></div>
	    <script type="text/javascript">
	       var disqus_identifier = "hyperbolic-tiling-in-3d.html";
	       (function() {
	       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	       dsq.src = 'http://lookthinkmake.disqus.com/embed.js';
	       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	      })();
	    </script>
	</div>

		  </div>	
		  
		  <div class="sidebar">

	        <nav>
		  <h2>Recent Posts</h2>
			<ul class="archive">
	
			      <li>
<a href="http://www.elfnor.com/hyperbolic-tiling-in-3d.html" rel="bookmark" title="Permalink to Hyperbolic Tiling in 3D">Hyperbolic Tiling in 3D</a>
  <time datetime="2015-11-06T22:00:00+13:00" pubdate>Fri 06 November 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/shaders-for-sverchok-04-vertex-colors-update.html" rel="bookmark" title="Permalink to Shaders for Sverchok 04 - Vertex Colors Update">Shaders for Sverchok 04 - Vertex Colors Update</a>
  <time datetime="2015-10-02T22:00:00+13:00" pubdate>Fri 02 October 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/blender-linked-stars.html" rel="bookmark" title="Permalink to Blender Linked Stars">Blender Linked Stars</a>
  <time datetime="2015-09-27T22:00:00+13:00" pubdate>Sun 27 September 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/bloom-spheres-in-sverchok.html" rel="bookmark" title="Permalink to Bloom Spheres in Sverchok">Bloom Spheres in Sverchok</a>
  <time datetime="2015-09-09T22:00:00+12:00" pubdate>Wed 09 September 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/think.html">think  </a><a href="http://www.elfnor.com/tag/blender.html">blender  </a><a href="http://www.elfnor.com/tag/sverchok.html">sverchok  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/micropython-oled-module-with-the-ssd1306-chip.html" rel="bookmark" title="Permalink to Micropython - OLED module with the ssd1306 chip">Micropython - OLED module with the ssd1306 chip</a>
  <time datetime="2015-07-10T22:00:00+12:00" pubdate>Fri 10 July 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/python.html">python  </a><a href="http://www.elfnor.com/tag/micropython.html">micropython  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/reading-the-world-10-audio-online-stories.html" rel="bookmark" title="Permalink to Reading the World - 10 Audio Online Stories">Reading the World - 10 Audio Online Stories</a>
  <time datetime="2015-07-04T22:00:00+12:00" pubdate>Sat 04 July 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/reading.html">reading  </a></p></a>      			      </li>
		
	
			      <li>
<a href="http://www.elfnor.com/micropython-stepper-motor-control-with-a-a4988-carrier-board.html" rel="bookmark" title="Permalink to Micropython - Stepper motor control with  a A4988 carrier board">Micropython - Stepper motor control with  a A4988 carrier board</a>
  <time datetime="2015-07-03T22:00:00+12:00" pubdate>Fri 03 July 2015</time>
<p class="tags">tags: <a href="http://www.elfnor.com/tag/make.html">make  </a><a href="http://www.elfnor.com/tag/python.html">python  </a><a href="http://www.elfnor.com/tag/micropython.html">micropython  </a></p></a>      			      </li>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	
                        </u1>
		
		</nav>

	          <h2>Categories</h2>
	          <ul class = "social">
		      <li> <a href="http://www.elfnor.com/archives.html">everything </a></li>	
	              <li ><a href="http://www.elfnor.com/category/look.html">look</a></li>
	              <li ><a href="http://www.elfnor.com/category/make.html">make</a></li>
	              <li class="active"><a href="http://www.elfnor.com/category/think.html">think</a></li>
	          </ul>
	        

	          <aside>
	          <h2>Elsewhere</h2>
			    <ul class="social">
				  <li><a href="http://elfnor.deviantart.com">on deviant art</a><i></i></li>
				  <li><a href="http://www.thingiverse.com/elfnor">on thingiverse</a><i></i></li>
				  <li><a href="https://github.com/elfnor">on github</a><i></i></li>
			    </ul>
			  </aside>
                
                <h2>Tags</h2>
	
                        <ul class="tagcloud">
                        </ul>
                      
		
		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  © 2013 elfnor - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey"> pelican-simplegrey</a>, modified.
    	</p>

	  </footer>	

	</div>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=9900594; 
var sc_invisible=1; 
var sc_security="efb2c43c"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counter" href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="http://c.statcounter.com/9900594/0/efb2c43c/1/"
alt="free hit counter"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>